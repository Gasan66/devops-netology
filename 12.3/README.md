# 12.3 Развертывание кластера на собственных серверах, лекция 1

1. Исходя из задачи нам нужно 31Gb RAM и 17 core.
2. Я бы разделил ноды на три пула:
   1. БД + Кэш - 6 контейнеров
   2. Приложения фронта - 5 контейнеров
   3. Бэк - 10 контейнеров
3. Кол-во контейнеров на ноду:
   1. БД + Кэш - 2 контейнера на ноду. 6 / 2 = 3 ноды
   2. Фронт - 2 контейнера на ноду. 5 / 2 = 3 ноды
   3. Бэк - 3 контейнера на ноду. 10 / 3 = 4 ноды
4. Ресурсы ноды:
   1. БД + Кэш. Ресурс для контейнеров + отказ одной ноды + ресурс для системы = 2 * (4Gb RAM + 1 core) + (4Gb RAM + 1 core) + (1Gb RAM + 1 core) = **13Gb RAM + 4 core**
   2. Фронт. 2 * (0.05Gb RAM + 0.2 core) + (0.05Gb RAM + 0.2 core) + (1Gb RAM + 1 core) = **1.15Gb RAM + 1.6 core**
   3. Бэк. 3 * (0.6Gb RAM + 1 core) + (0.6Gb RAM + 1 core) + (1Gb RAM + 1 core) = **3.4Gb RAM + 5 core**
5. **Итого:**
   1. **3 воркерноды: 13Gb RAM + 4 core**
   2. **3 воркерноды: 2Gb RAM + 2 core**
   3. **4 воркерноды: 4Gb RAM + 5 core**
   4. **2 контролноды: 2Gb RAM + 2 core**